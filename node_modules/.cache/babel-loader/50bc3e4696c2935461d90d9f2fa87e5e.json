{"ast":null,"code":"var _jsxFileName = \"/Users/ajzanrahmetova/Desktop/Self study/React-JS-IT-cama/projects/1/src/components/Login/login.jsx\";\nimport React from 'react';\nimport module from './Login.module.scss';\nimport { Field, Form } from 'react-final-form';\nimport { connect } from 'react-redux';\nimport { Navigate } from 'react-router-dom';\nimport { login } from '../../redux/auth-reducer';\nimport { composeValidators, required } from '../../utils/validators/validators';\nimport { Input } from '../common/FormsControls/FormsControls';\nimport { FORM_ERROR } from \"final-form\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LoginFinalForm = _ref => {\n  let {\n    onSubmit,\n    captchaUrl\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: onSubmit,\n      render: _ref2 => {\n        let {\n          handleSubmit,\n          submitError\n        } = _ref2;\n        return /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Field, {\n              placeholder: 'Email',\n              name: \"email\",\n              component: Input,\n              validate: composeValidators(required)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 19,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 18,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Field, {\n              placeholder: 'Password',\n              name: \"password\",\n              component: Input,\n              validate: composeValidators(required),\n              type: \"password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 22,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 21,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Field, {\n              type: 'checkbox',\n              name: \"rememberMe\",\n              component: Input\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 25,\n              columnNumber: 29\n            }, this), \" remember me\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 24,\n            columnNumber: 25\n          }, this), captchaUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: captchaUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 40\n          }, this), captchaUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Field, {\n              placeholder: 'Symbols from image',\n              name: \"captcha\",\n              component: Input,\n              validate: composeValidators(required)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 31,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 36,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 25\n          }, this), submitError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: module.submitError,\n            children: submitError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 21\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 9\n  }, this);\n};\n\n_c = LoginFinalForm;\n\nconst Login = props => {\n  const sleep = ms => new Promise(resolve => setTimeout(resolve, ms)); //это из final form документации\n\n\n  const onSubmit = async formData => {\n    props.login(formData.email, formData.password, formData.rememberMe, formData.captcha);\n    await sleep(300);\n\n    if (!props.isAuth) {\n      return {\n        [FORM_ERROR]: 'Login Failed'\n      };\n    }\n  };\n\n  if (props.isAuth) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(LoginFinalForm, {\n      onSubmit: onSubmit,\n      captchaUrl: props.captchaUrl\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n};\n\n_c2 = Login;\n\nconst mapStateToProps = state => ({\n  captchaUrl: state.auth.captchaUrl,\n  isAuth: state.auth.isAuth\n});\n\nexport default connect(mapStateToProps, {\n  login\n})(Login);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"LoginFinalForm\");\n$RefreshReg$(_c2, \"Login\");","map":{"version":3,"names":["React","module","Field","Form","connect","Navigate","login","composeValidators","required","Input","FORM_ERROR","LoginFinalForm","onSubmit","captchaUrl","handleSubmit","submitError","Login","props","sleep","ms","Promise","resolve","setTimeout","formData","email","password","rememberMe","captcha","isAuth","mapStateToProps","state","auth"],"sources":["/Users/ajzanrahmetova/Desktop/Self study/React-JS-IT-cama/projects/1/src/components/Login/login.jsx"],"sourcesContent":["import React from 'react'\nimport module from './Login.module.scss'\nimport { Field, Form } from 'react-final-form'\nimport { connect } from 'react-redux'\nimport { Navigate } from 'react-router-dom'\nimport { login } from '../../redux/auth-reducer'\nimport { composeValidators, required } from '../../utils/validators/validators'\nimport { Input } from '../common/FormsControls/FormsControls'\nimport { FORM_ERROR } from \"final-form\"\n\nconst LoginFinalForm = ({ onSubmit, captchaUrl }) => {\n    return (\n        <div>\n            <Form\n                onSubmit={onSubmit}\n                render={({ handleSubmit, submitError }) => (\n                    <form onSubmit={handleSubmit}>\n                        <div>\n                            <Field placeholder={'Email'} name={\"email\"} component={Input} validate={composeValidators(required)} />\n                        </div>\n                        <div>\n                            <Field placeholder={'Password'} name={\"password\"} component={Input} validate={composeValidators(required)} type={\"password\"} />\n                        </div>\n                        <div>\n                            <Field type={'checkbox'} name={\"rememberMe\"} component={Input} /> remember me\n                        </div>\n\n                        {captchaUrl && <img src={captchaUrl} />}\n                        {captchaUrl &&\n                            <div>\n                                <Field placeholder={'Symbols from image'} name={\"captcha\"} component={Input} validate={composeValidators(required)} />\n                            </div>\n                        }\n\n                        <div>\n                            <button type=\"submit\">Login</button>\n                        </div>\n                        {submitError && <div className={module.submitError}>{submitError}</div>}\n                    </form>\n                )}\n            />\n        </div>\n    )\n}\n\nconst Login = (props) => {\n    const sleep = ms => new Promise(resolve => setTimeout(resolve, ms)) //это из final form документации\n\n    const onSubmit = async formData => {\n        props.login(formData.email, formData.password, formData.rememberMe, formData.captcha)\n        await sleep(300)\n        if (!props.isAuth) {\n            return { [FORM_ERROR]: 'Login Failed' }\n        }\n    }\n\n    if (props.isAuth) {\n        return <Navigate to={\"/profile\"} />\n    }\n\n    return (\n        <div>\n            <h1>Login</h1>\n            <LoginFinalForm onSubmit={onSubmit} captchaUrl={props.captchaUrl} />\n        </div>\n    )\n}\n\nconst mapStateToProps = (state) => ({\n    captchaUrl: state.auth.captchaUrl,\n    isAuth: state.auth.isAuth\n})\n\nexport default connect(mapStateToProps, { login })(Login)"],"mappings":"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"},"metadata":{},"sourceType":"module"}